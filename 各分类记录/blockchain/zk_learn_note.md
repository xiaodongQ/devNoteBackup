# ZK learn

记录零知识证明（Zero-Knowledge Proof，ZKP）技术学习。

## 初步了解

1、视频：Amit Sahai教授针对不同年龄和知识水平的人讲解ZKP的几个示例

Amit Sahai是UCLA的计算机方面的一位杰出教授，研究兴趣集中在密码学和安全等领域。

油管视频：[初步理解 ZK 是什么](https://www.youtube.com/watch?v=fOGdb1CTu5c)

2、中文播客：[零知识证明](https://www.xiaoyuzhoufm.com/episode/6672a76bb6a8412729e0b103)

还是先看文章吧，，只是听吸收不到多少内容

3、[社区](https://learn.z2o-k7e.world/)整理的学习ZKP资料，可作为参考学习

[ZKP 新手村入门攻略](https://learn.z2o-k7e.world/beginner.html)

番外：  
找郭宇老师推特（[1dot2](https://twitter.com/1dot2)）过程中，看到已退推的[kurtpan.eth](https://twitter.com/kurtpan666)（复旦密码学博士，也是上面z2o-k7e项目的主要贡献者之一）博客上截取自《过河卒》的这篇文章：[过河卒·日出江花红胜火](https://zkfold.ing/guohezu-wd)。  
周六去杭州的web3 summer线下，正好嘉宾也谈到比特币白皮书和国人的渊源，引用文献的第一篇就是一个华人的文章。也就是上面文章中的[Wei Dai](https://en.wikipedia.org/wiki/Wei_Dai)。

先学习下面的3篇文章，建立对 zkp 的直观理解：

* [1. 初识「零知识」与「证明」](https://learn.z2o-k7e.world/zkp-intro/1/zkp-back.html)
* [2. 理解「模拟」](https://learn.z2o-k7e.world/zkp-intro/2/zkp-simu.html)
* [3. 寻找「知识」](https://learn.z2o-k7e.world/zkp-intro/3/zkp-pok.html)

### [1. 初识「零知识」与「证明」](https://learn.z2o-k7e.world/zkp-intro/1/zkp-back.html)

三个概念：`证明`、`知识`、`零知识`

不同年代对`证明`的诠释：证明 == 洞见、证明 == 符号推理、证明 == 程序、证明 == 交互

> 交互证明的表现形式是两个（或者多个图灵机）的「对话脚本」，或者称为 Transcript。而这个对话过程，其中有一个显式的`「证明者」`角色，还有一个显式的`「验证者」`。其中证明者向验证者证明一个命题成立，同时还 **「不泄露其他任何知识」**。这种就被称为`「零知识证明」`。
> 
> 证明凝结了`「知识」`，但是证明过程却可以不泄露`「知识」`

零知识证明的一些用处：

* 数据的隐私保护。只需提供有限的信息
* 计算压缩与区块链扩容。有了计算的证明，就不用重复计算多次了，计算过程可压缩
* 端到端的通讯加密。不用担心服务器拿到所有的消息记录
* 身份认证。用户可以向网站证明，他拥有私钥
* 去中心化存储。向用户证明他们的数据被妥善保存并且不泄漏
* 信用记录。选择性出示满足对方要求的信用记录
* 构造完全公平的线上数字化商品的交易协议

**地图三染色问题：**

问题：如何用三种颜色染色一个地图，保证任意两个相邻的地区都是不同的颜色。

`「证明者」`Alice、`「验证者」` Bob。现在 Alice 想证明给 Bob 她有答案，但是又不想让 Bob 知道这个答案。

`信息（Information）` vs `知识（Knowledge）`

我们可以尝试定义一下，如果 Bob 在交互过程中获得的`「信息」`，可以帮助提升 Bob 直接破解 Alice 秘密的能力，那么我们说 Bob 「获得了知识」。
由此可见，知识这个词的定义与 Bob 的计算能力相关，如果信息并不能增加 Bob 的计算能力，那么信息不能被称为`「知识」`。

可是，Bob 每次看到的局部染色情况都是 Alice 变换过后的结果，无论 Bob 看多少次，都不能拼出一个完整的三染色答案出来。实际上，Bob 在这个过程中，虽然获得了很多`「信息」`，但是却没有获得真正的`「知识」`。

**可验证计算**、**电路可满足性问题**

先来了解 **`NP问题（Non-deterministic Polynomial time，非确定性多项式时间）`**：

NP问题（Nondeterministic Polynomial time问题）是计算复杂性理论中的一个重要概念。简单来说，NP问题是指那些`可以在多项式时间内验证答案`的决策问题。  
`多项式时间`是指算法的运行时间随着输入大小的增长而增长，但增长速度是缓慢的，运行时间可以用一个多项式函数来表示，比如线性搜索、二分搜索、快速排序。

在NP问题中，多项式时间是指`验证答案`的时间，而不是`求解问题`的时间。换句话说，NP问题的多项式时间是指检查答案是否正确的时间，而不是找到答案的时间。

在NP问题中，有一个特别重要的子集，称为`NP完全问题（NP-complete problems）`。NP完全问题是指那些在多项式时间内不能被转化为其他NP问题的NP问题。换句话说，NP完全问题是NP问题中的最难问题，比如旅行商问题、背包问题、图着色问题。

对于`NP-Complete`问题，求解过程是多项式时间内难以完成的，即`「求解困难」`，但是验证解的过程是多项式时间可以完成的，即`「验证简单」`

**算术电路：**

场景：Bob 交给 Alice 一段代码 P，和一个输入 x，让 Alice 来运行一遍，然后把运行结果（假设为y）告诉 Bob。

问题：如何让 Bob 在不运行代码的前提下，相信代码 P 运行的结果一定是 y 呢？

答案：Bob 把程序 P 转换成一个完全等价的算术电路，然后把电路交给 Alice。Alice 只要计算这个电路并把过程记录下来，并提供给Bob，Bob 就能确信 Alice 确实进行了计算。

所谓的 **`电路可满足性`**就是指：存在满足电路的一个解。如果这个解的输出值等于一个确定值，那么这个解就能「表示」电路的计算过程。

但是上述方法有弊端：1）如果电路比较大，那么证明就很大，Bob 检查证明的工作量也很大；2）Bob 在验证过程中，知道了所有的电路运算细节，包括输入

解决方式：Alice 以一种零知识的方式，向 Bob 证明她计算过了电路，并且使用了她的秘密输入

`「零知识的电路可满足性证明协议」`提供了一种最直接的保护隐私/敏感数据的技术

### [2. 理解「模拟」](https://learn.z2o-k7e.world/zkp-intro/2/zkp-simu.html)

**`模拟`**是理解零知识的关键。任何一个零知识的协议，都可以通过构造一个`「理想世界」`来理解。

**问题**：如何证明一个交互式系统是「零知识」呢？

如果我们深入地分析每一个我们感觉安全的系统，都存在大量的似乎不那么稳固的`安全假设`。

所谓`安全假设`，比如我们说一个系统的权限隔离做得无比精确，每一个用户只能看到被授权的信息，但是这基于一个安全假设：管理员账号没有被破解。又比如在手机银行软件里，只能通过短信认证码，才能完成转账功能，这也基于一个安全假设：你的手机 SIM 卡没有被克隆。

比特币私钥安全吗？比特币账户的安全假设也不少：首先你的助记词不能让别人知道，手机钱包里私钥保存加密算法足够强，密钥派生算法正规，你不能忘记助记词，等等等。

`完美安全`（香农）：假设你是一个攻击者，你通过密文获取不到任何有价值的信息，破解的唯一手段就是靠瞎蒙。

`语义安全`（概率加密论文，Goldwasser 与 Micali 等）：假设你是一个攻击者，你通过密文在多项式时间内计算不出来任何有价值的信息。

**例子：**

1、两个世界：真实世界 vs 理想世界

真实世界`证明者`个体知道答案，即有`知识`；理想世界没有`知识`。

* 不可区分性，针对理想世界中的个体认知
* 可区分性，针对世界外部的“神”：模拟器（Simulator）

> 证明零知识的过程，就是要寻找一个算法，或者更通俗点说，写出一段代码，它运行在外部计算机系统中，但是实现了虚拟机的功能。而且在虚拟机中，需要有一个不带有「知识」作为输入的 Zlice，可以骗过放入虚拟机运行的 Bob。

2、阿里巴巴、洞穴与芝麻开门

3、柏拉图的洞穴寓言

### [3. 寻找「知识」](https://learn.z2o-k7e.world/zkp-intro/3/zkp-pok.html)

